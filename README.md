# 抖音评论采集工具 V2.0

这是一个用于采集抖音视频评论的高级工具，支持获取一级评论和二级评论（回复）。本工具采用异步请求技术，具有高效、稳定、用户友好的特点。

## 🌟 功能特点

- ✨ 支持采集一级评论和二级评论（回复）
- 🚀 异步请求技术，采集速度快
- 🛡️ 内置错误处理和自动重试机制
- 📊 数据导出为CSV格式，方便分析
- 🎯 支持断点续传
- 📝 详细的日志记录
- 🔄 自动处理请求频率限制
- 🖼️ 支持获取评论中的图片
- 🌈 友好的命令行界面

## 🔧 环境要求

- Python 3.8+
- Node.js（用于执行JS代码）
- 相关Python包（见 requirements.txt）

## 📦 安装步骤

1. 克隆代码库：
```bash
git clone https://github.com/wilsonwussd/DouyinComments.git
cd DouyinComments
```

2. 创建并激活虚拟环境（推荐）：
```bash
python -m venv venv
# Windows
venv\Scripts\activate
# macOS/Linux
source venv/bin/activate
```

3. 安装依赖：
```bash
pip install -r requirements.txt
```

4. 配置cookie：
   - 创建 cookie.txt 文件
   - 从抖音网页版获取cookie并写入文件
   - 建议使用登录状态的cookie以获取完整数据

## 🚀 使用方法

### 运行主程序

```bash
python main.py
```

程序会提示：
1. 输入抖音视频ID
2. 询问是否需要获取评论的回复

### 数据输出

程序会在 `data/v1/<视频ID>/` 目录下生成以下文件：
- `comments.csv`：一级评论数据
- `replies.csv`：二级评论（回复）数据

### 数据字段说明

评论数据（comments.csv）包含：
- 评论ID
- 评论内容
- 评论图片
- 点赞数
- 评论时间
- 用户昵称
- 用户主页链接
- 用户抖音号
- 用户签名
- 回复总数
- IP归属地

回复数据（replies.csv）额外包含：
- 回复的评论ID
- 具体的回复对象
- 回复给谁

## 📝 日志记录

- 程序运行日志保存在 `error.log` 文件中
- 控制台实时显示运行状态
- 错误日志自动轮转，避免占用过多磁盘空间

## ⚠️ 注意事项

1. 使用前请确保：
   - 已安装所有依赖包
   - 已配置正确的cookie
   - 网络连接稳定

2. 性能优化建议：
   - 对于评论数量较多的视频，建议分批次采集
   - 可以适当调整请求间隔时间
   - 如遇到网络问题，程序会自动重试

3. 可能遇到的问题：
   - cookie过期：需要更新cookie.txt文件
   - 网络超时：程序会自动重试
   - 请求频率限制：内置等待机制

## 🔒 免责声明

本工具仅供学习交流使用，请勿用于非法用途。使用本工具时请遵守相关法律法规，如造成任何问题，与本工具作者无关。

## 🔄 更新日志

### V2.0 (2024-01-13)
- 添加了详细的错误处理
- 优化了用户界面
- 添加了日志记录功能
- 支持自动重试机制
- 改进了数据处理逻辑

### V1.0
- 基础功能实现
- 支持评论和回复采集
- CSV格式数据导出

## 🙏 参考项目

感谢以下项目的启发：
- [ShilongLee/Crawler](https://github.com/ShilongLee/Crawler)

## 📬 问题反馈

如果您在使用过程中遇到任何问题，欢迎提出 Issue。
